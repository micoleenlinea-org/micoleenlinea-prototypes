<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plantillas - MiColeEnLinea</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/feather-icons"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Plus Jakarta Sans', 'system-ui', 'sans-serif'],
          },
          colors: {
            primary: { 50: '#EEF2FF', 100: '#E0E7FF', 500: '#6366F1', 600: '#4F46E5' },
            gray: { 50: '#F9FAFB', 100: '#F3F4F6', 200: '#E5E7EB', 300: '#D1D5DB', 400: '#9CA3AF', 500: '#6B7280', 600: '#4B5563', 700: '#374151', 800: '#1F2937' },
          },
          borderRadius: { 'xl': '16px', '2xl': '20px' },
          boxShadow: { 'soft': '0 2px 16px rgba(0, 0, 0, 0.06)', 'modal': '0 25px 50px rgba(0, 0, 0, 0.15)' },
        },
      },
    }
  </script>

  <style>
    body {
      font-family: 'Plus Jakarta Sans', system-ui, sans-serif;
      background-color: #F9FAFB;
    }

    /* Template card */
    .template-card {
      background: white;
      border-radius: 16px;
      box-shadow: 0 2px 16px rgba(0, 0, 0, 0.06);
      padding: 20px;
      transition: all 0.15s ease;
    }

    .template-card:hover {
      box-shadow: 0 4px 24px rgba(0, 0, 0, 0.08);
    }

    /* Badge */
    .badge {
      display: inline-flex;
      align-items: center;
      padding: 4px 10px;
      border-radius: 9999px;
      font-size: 12px;
      font-weight: 500;
    }
    .badge-system { background-color: #E5E7EB; color: #374151; }
    .badge-custom { background-color: #EEF2FF; color: #4F46E5; }

    /* Action button */
    .action-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      border-radius: 10px;
      color: #6B7280;
      transition: all 0.15s ease;
    }

    .action-btn:hover {
      background-color: #F3F4F6;
      color: #374151;
    }

    .action-btn.danger:hover {
      background-color: #FEF2F2;
      color: #DC2626;
    }

    /* Modal */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      z-index: 50;
    }

    .modal-content {
      background: white;
      border-radius: 24px;
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
      width: 100%;
      max-width: 540px;
      max-height: 90vh;
      overflow-y: auto;
    }

    /* Input */
    .input-field {
      width: 100%;
      padding: 12px 16px;
      font-size: 16px;
      border: 1px solid #E5E7EB;
      border-radius: 12px;
      background-color: white;
      color: #1F2937;
      transition: all 0.2s ease;
      outline: none;
    }

    .input-field:focus {
      border-color: #6366F1;
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
    }

    .textarea-field {
      resize: vertical;
      min-height: 120px;
    }

    /* Variable tag */
    .variable-tag {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 8px;
      background-color: #EEF2FF;
      border: 1px solid #C7D2FE;
      border-radius: 6px;
      font-size: 12px;
      font-family: monospace;
      color: #4F46E5;
      cursor: pointer;
    }

    .variable-tag:hover {
      background-color: #E0E7FF;
    }

    /* Hidden modal by default */
    #modal {
      display: none;
    }

    #modal.open {
      display: flex;
    }
  </style>
</head>
<body class="p-4 md:p-8">
  <div class="max-w-4xl mx-auto">

    <!-- Header -->
    <header class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8">
      <div>
        <h1 class="text-2xl font-bold text-gray-800">Plantillas de Notificaciones</h1>
        <p class="text-gray-500 mt-1">Crea y gestiona plantillas reutilizables para tus mensajes</p>
      </div>
      <button onclick="openModal()" class="px-4 py-2.5 bg-primary-500 text-white font-semibold rounded-xl hover:bg-primary-600 transition-colors flex items-center gap-2">
        <i data-feather="plus" class="w-4 h-4"></i>
        <span>Nueva plantilla</span>
      </button>
    </header>

    <!-- System templates -->
    <section class="mb-8">
      <h2 class="text-sm font-semibold text-gray-400 uppercase tracking-wider mb-4">Del sistema</h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

        <div class="template-card">
          <div class="flex items-start justify-between mb-3">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 rounded-xl bg-blue-100 flex items-center justify-center">
                <i data-feather="users" class="w-5 h-5 text-blue-600"></i>
              </div>
              <div>
                <h3 class="font-semibold text-gray-800">Reunion de padres</h3>
                <span class="badge badge-system">Sistema</span>
              </div>
            </div>
          </div>
          <p class="text-sm text-gray-500 line-clamp-2 mb-4">
            Estimadas familias de {CURSO}, los invitamos a la reunion de padres que se realizara el dia {FECHA}...
          </p>
          <div class="flex gap-2">
            <button class="flex-1 px-4 py-2 text-sm font-medium text-primary-600 border border-primary-200 rounded-lg hover:bg-primary-50 transition-colors">
              Vista previa
            </button>
            <button class="px-4 py-2 text-sm font-medium text-gray-600 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">
              Usar
            </button>
          </div>
        </div>

        <div class="template-card">
          <div class="flex items-start justify-between mb-3">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 rounded-xl bg-red-100 flex items-center justify-center">
                <i data-feather="alert-circle" class="w-5 h-5 text-red-600"></i>
              </div>
              <div>
                <h3 class="font-semibold text-gray-800">Suspension de clases</h3>
                <span class="badge badge-system">Sistema</span>
              </div>
            </div>
          </div>
          <p class="text-sm text-gray-500 line-clamp-2 mb-4">
            Estimadas familias, les informamos que el dia {FECHA} las clases quedaran suspendidas debido a...
          </p>
          <div class="flex gap-2">
            <button class="flex-1 px-4 py-2 text-sm font-medium text-primary-600 border border-primary-200 rounded-lg hover:bg-primary-50 transition-colors">
              Vista previa
            </button>
            <button class="px-4 py-2 text-sm font-medium text-gray-600 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">
              Usar
            </button>
          </div>
        </div>

        <div class="template-card">
          <div class="flex items-start justify-between mb-3">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 rounded-xl bg-green-100 flex items-center justify-center">
                <i data-feather="credit-card" class="w-5 h-5 text-green-600"></i>
              </div>
              <div>
                <h3 class="font-semibold text-gray-800">Recordatorio de cuota</h3>
                <span class="badge badge-system">Sistema</span>
              </div>
            </div>
          </div>
          <p class="text-sm text-gray-500 line-clamp-2 mb-4">
            Estimada familia, les recordamos que la cuota del mes de {MES} vence el dia {FECHA}...
          </p>
          <div class="flex gap-2">
            <button class="flex-1 px-4 py-2 text-sm font-medium text-primary-600 border border-primary-200 rounded-lg hover:bg-primary-50 transition-colors">
              Vista previa
            </button>
            <button class="px-4 py-2 text-sm font-medium text-gray-600 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">
              Usar
            </button>
          </div>
        </div>

      </div>
    </section>

    <!-- Custom templates -->
    <section>
      <h2 class="text-sm font-semibold text-gray-400 uppercase tracking-wider mb-4">Mis plantillas</h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

        <div class="template-card">
          <div class="flex items-start justify-between mb-3">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 rounded-xl bg-primary-100 flex items-center justify-center">
                <i data-feather="file-text" class="w-5 h-5 text-primary-600"></i>
              </div>
              <div>
                <h3 class="font-semibold text-gray-800">Comunicado mensual</h3>
                <span class="badge badge-custom">Personalizada</span>
              </div>
            </div>
            <div class="flex gap-1">
              <button class="action-btn" title="Editar" onclick="openModal('edit')">
                <i data-feather="edit-2" class="w-4 h-4"></i>
              </button>
              <button class="action-btn danger" title="Eliminar">
                <i data-feather="trash-2" class="w-4 h-4"></i>
              </button>
            </div>
          </div>
          <p class="text-sm text-gray-500 line-clamp-2 mb-4">
            Queridas familias de {CURSO}, compartimos el resumen del mes con las actividades realizadas...
          </p>
          <div class="flex gap-2">
            <button class="flex-1 px-4 py-2 text-sm font-medium text-primary-600 border border-primary-200 rounded-lg hover:bg-primary-50 transition-colors">
              Vista previa
            </button>
            <button class="px-4 py-2 text-sm font-medium text-gray-600 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">
              Usar
            </button>
          </div>
        </div>

        <div class="template-card">
          <div class="flex items-start justify-between mb-3">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 rounded-xl bg-amber-100 flex items-center justify-center">
                <i data-feather="map-pin" class="w-5 h-5 text-amber-600"></i>
              </div>
              <div>
                <h3 class="font-semibold text-gray-800">Aviso de excursion</h3>
                <span class="badge badge-custom">Personalizada</span>
              </div>
            </div>
            <div class="flex gap-1">
              <button class="action-btn" title="Editar" onclick="openModal('edit')">
                <i data-feather="edit-2" class="w-4 h-4"></i>
              </button>
              <button class="action-btn danger" title="Eliminar">
                <i data-feather="trash-2" class="w-4 h-4"></i>
              </button>
            </div>
          </div>
          <p class="text-sm text-gray-500 line-clamp-2 mb-4">
            Estimadas familias, les informamos que el dia {FECHA} realizaremos una excursion a...
          </p>
          <div class="flex gap-2">
            <button class="flex-1 px-4 py-2 text-sm font-medium text-primary-600 border border-primary-200 rounded-lg hover:bg-primary-50 transition-colors">
              Vista previa
            </button>
            <button class="px-4 py-2 text-sm font-medium text-gray-600 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">
              Usar
            </button>
          </div>
        </div>

        <!-- Empty state for adding more -->
        <div class="template-card border-2 border-dashed border-gray-200 bg-transparent shadow-none flex items-center justify-center min-h-[180px] cursor-pointer hover:border-primary-300 hover:bg-primary-50/30" onclick="openModal()">
          <div class="text-center">
            <div class="w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-3">
              <i data-feather="plus" class="w-6 h-6 text-gray-400"></i>
            </div>
            <p class="font-medium text-gray-600">Crear nueva plantilla</p>
          </div>
        </div>

      </div>
    </section>

  </div>

  <!-- Modal: Create/Edit template -->
  <div id="modal" class="modal-overlay" onclick="closeModal(event)">
    <div class="modal-content" onclick="event.stopPropagation()">
      <div class="p-6 border-b border-gray-100">
        <div class="flex items-center justify-between">
          <h2 class="text-xl font-bold text-gray-800" id="modal-title">Nueva plantilla</h2>
          <button onclick="closeModal()" class="p-2 rounded-lg hover:bg-gray-100">
            <i data-feather="x" class="w-5 h-5 text-gray-500"></i>
          </button>
        </div>
      </div>

      <div class="p-6 space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1.5">Nombre de la plantilla</label>
          <input type="text" class="input-field" placeholder="Ej: Comunicado semanal">
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1.5">Tipo</label>
          <select class="input-field">
            <option value="institutional">Institucional (toda la escuela)</option>
            <option value="course">Por curso</option>
            <option value="personal">Individual</option>
          </select>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1.5">Asunto</label>
          <input type="text" class="input-field" placeholder="Ej: Convocatoria a reunion - {CURSO}">
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1.5">Mensaje</label>
          <textarea class="input-field textarea-field" placeholder="Escribe el contenido de la plantilla...">Estimadas familias de {CURSO},

[Tu mensaje aqui]

Saludos cordiales,
{COLEGIO}</textarea>
        </div>

        <!-- Variables helper -->
        <div class="p-4 bg-gray-50 rounded-xl">
          <p class="text-sm text-gray-600 font-medium mb-2">Variables disponibles:</p>
          <div class="flex flex-wrap gap-2">
            <span class="variable-tag">{CURSO}</span>
            <span class="variable-tag">{FECHA}</span>
            <span class="variable-tag">{COLEGIO}</span>
            <span class="variable-tag">{ALUMNO}</span>
            <span class="variable-tag">{MES}</span>
          </div>
        </div>
      </div>

      <div class="p-6 border-t border-gray-100 flex gap-3 justify-end">
        <button onclick="closeModal()" class="px-5 py-2.5 text-gray-600 font-medium rounded-xl hover:bg-gray-100 transition-colors">
          Cancelar
        </button>
        <button class="px-5 py-2.5 bg-primary-500 text-white font-semibold rounded-xl hover:bg-primary-600 transition-colors">
          Guardar plantilla
        </button>
      </div>
    </div>
  </div>

  <script>
    feather.replace();

    function openModal(mode = 'create') {
      const modal = document.getElementById('modal');
      const title = document.getElementById('modal-title');

      if (mode === 'edit') {
        title.textContent = 'Editar plantilla';
      } else {
        title.textContent = 'Nueva plantilla';
      }

      modal.classList.add('open');
      document.body.style.overflow = 'hidden';
    }

    function closeModal(event) {
      if (event && event.target !== event.currentTarget) return;

      const modal = document.getElementById('modal');
      modal.classList.remove('open');
      document.body.style.overflow = '';
    }

    // Close on escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeModal();
    });
  </script>
</body>
</html>
